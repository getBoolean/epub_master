<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="generator" content="made with love by dartdoc 4.1.0">
  <meta name="description" content="shu_epub API docs, for the Dart programming language.">
  <title>shu_epub - Dart API docs</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">

  
</head>


<body data-base-href=""
      data-using-base-href="false">

<div id="overlay-under-drawer"></div>

<header id="title">
  <button id="sidenav-left-toggle" type="button">&nbsp;</button>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li class="self-crumb">shu_epub package</li>
  </ol>
  <div class="self-name">shu_epub</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<main>


  <div id="dartdoc-main-content" class="main-content">
      
<section class="desc markdown">
  <h1 id="shu_epub">shu_epub</h1>
<p><a href="https://codecov.io/gh/getBoolean/shu_epub"><img src="https://codecov.io/gh/getBoolean/shu_epub/branch/main/graph/badge.svg?token=LN8VSR2UER" alt="codecov"></a></p>
<p><a href="https://gitpod.io/#https://github.com/getBoolean/shu_epub"><img src="https://img.shields.io/badge/Open_in_Gitpod-white.svg?style=flat&amp;logo=data:image/png;base64,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" alt="Open in Gitpod"></a></p><!-- [![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/#https://github.com/getBoolean/shu_epub) -->
<p>A Dart EPUB parser built from the ground up, and designed to support a variety of use cases and custom implementations such as on-device caching and serving content from a server. This package is current WIP and is NOT yet usuable.</p>
<h2 id="motivation">Motivation</h2>
<p>This package enables the application to only have the files needed from the EPUB file loaded into memory, instead of the entire EPUB file
being required in memory like in other popular epub packages.</p>
<h2 id="features">Features</h2>
<ul>
<li>EpubControllerBase - An abstract class intended to be extended to enable flexibility inspired by Flutter's Widget class
<ul>
<li>Enables use cases such asserving epubs from the web or caching epubs on the file system</li>
</ul>
</li>
<li>EpubArchiveController - Extends EpubControllerBase, reads in entire bytes of an .epub file for reading and independent from dart:io</li>
<li>EpubArchiveIOController - Extends EpubControllerBase, uses file reference to the .epub file to only read in files when required.
However, this cannot take advantage of the system cache.</li>
<li>(flutter_shu_epub) EpubCacheController - Extracts ePub contents onto an Android or iOS device and caches the location, allowing for
the reader to only load the needed files into memory</li>
</ul>
<p>and more...</p>
<h2 id="progress-and-plans">Progress and Plans</h2>
<h3 id="shu_epub-this-package">shu_epub (this package)</h3>
<ul>
<li><code>x</code> Models</li>
<li><code>x</code> Reader Controllers
<ul>
<li><code>x</code> EpubContainerReaderController</li>
<li><code>x</code> EpubPackageReaderController
<ul>
<li><code> </code> Support Epub 2 <a href="http://idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.3.1.2">Out-Of-Line XML Islands</a>, removed in Epub 3</li>
</ul>
</li>
<li><code>x</code> EpubNavigationReaderController</li>
<li><code>x</code> EpubDetailsReaderController
<ul>
<li>Combines the container, package, and navigation into one class</li>
</ul>
</li>
</ul>
</li>
<li><code> </code> Publication/Content Controller</li>
<li><code> </code> <strong>EpubControllerBase</strong> (abstract)
<ul>
<li><code>x</code> Future getFilePaths - Method to get filepaths to all files in the epub</li>
<li><code>x</code> Future getFileBytes - Method to get bytes of file from the filepath</li>
<li><code>x</code> getEpubDetails</li>
<li>others tbd...</li>
</ul>
</li>
<li><code>x</code> <strong>EpubArchiveController</strong> extends <strong>EpubController</strong>
<ul>
<li><code>x</code> Given the loaded <code>.epub</code> file bytes</li>
<li><code>x</code> Overrides getFilePaths and getFileBytes to use <code>Archive</code>/<code>ArchiveFile</code></li>
</ul>
</li>
<li><code>x</code> <strong>EpubArchiveIOController</strong> extends <strong>EpubController</strong>
<ul>
<li><code>x</code> Given a file reference/path</li>
<li><code>x</code> Overrides getFilePaths and getFileBytes to use filestream <code>Archive</code>/<code>ArchiveFile</code></li>
</ul>
</li>
<li><code>x</code> (In <code>example.dart</code>) EpubExtractedController extends <strong>EpubController</strong>
<ul>
<li><code>x</code> Given a directory reference/path to the root folder of the extracted epub</li>
<li><code>x</code> Overrides getFilePaths and getFileBytes to use async <code>dart:io</code></li>
<li>Due to it requiring <code>dart:io</code>, it is not included in this package</li>
</ul>
</li>
<li><code> </code> Function/Class to declare supported epub content media types
<ul>
<li>Default is <code>application/xhtml+xml</code></li>
<li>Old epubs may use the deprecated <code>application/x-dtbook+xml</code> and <code>text/x-eob1-document</code></li>
</ul>
</li>
<li><code> </code> EpubBook class to simplify access to Epub content and metadata
<ul>
<li><code>x</code> EpubDetails (contains EpubContainer, EpubPackage, and EpubNavigation)</li>
<li><code> </code> EpubFiles (all files listed in manifest)
<ul>
<li><code> </code> Don't include items that are Out-Of-Line XML Islands</li>
</ul>
</li>
<li><code> </code> EpubReadingOrder (spine)
<ul>
<li><code> </code> List of EpubFile (should all be xhtml files?)</li>
<li><code> </code> Files are from manifest items included in the spine, in the same order as listed in the spine.
Automatically uses the fallback file if required-modules is specified, or if the media-type is not
included in the supported mediaTypes configuration.</li>
</ul>
</li>
<li><code> </code> EpubTableOfContents (ncx)
<ul>
<li><code> </code> Navigation Metadata</li>
<li><code> </code> Navigation Title</li>
<li><code> </code> Navigation Author</li>
<li><code> </code> Navigation Points (navMap)
<ul>
<li><code> </code> File</li>
<li><code> </code> CFI Location</li>
</ul>
</li>
<li><code> </code> Pages <em>Optional</em> (pageList)</li>
<li><code> </code> Other Navigation Lists <em>Optional</em> (navList)</li>
</ul>
</li>
</ul>
</li>
<li><code> </code> CFI Generator</li>
</ul>
<h3 id="flutter_shu_epub-tenative">flutter_shu_epub (tenative)</h3>
<ul>
<li>Uses Models and Parsers from dart_epub</li>
<li>Platform specific implementation to handle caching, only loads the
files it needs into memory</li>
<li>Controllers
<ul>
<li><strong>EpubCacheController</strong> extends <strong>EpubController</strong>
<ul>
<li>Reads from a <code>.epub</code> file extracted onto the file system, so
only the files needed are loaded into memory</li>
<li>Overrides getFilePaths and getFileBytes to use dart:io <code>File</code></li>
</ul>
</li>
<li><strong>EpubCacheManagerSingleton</strong>
<ul>
<li>Function to read an <code>.epub</code> file into memory and
cache it on local storage for quick access later, with an optional
id. The id is returned and it should be saved persistently with
a package such as Hive</li>
<li>Local Database for each cached EPUB with <strong>EpubCache</strong>, which includes
information about the EPUB and the <strong>EpubCacheController</strong> associated
with it</li>
<li>Clear cache</li>
<li>Delete epub from cache</li>
<li>Get all cached epub information</li>
</ul>
</li>
</ul>
</li>
<li>Models
<ul>
<li><strong>EpubCache</strong>
<ul>
<li>uid, can be specified</li>
<li>epub name</li>
<li>original filename</li>
<li>cache path</li>
<li>epubCacheController</li>
</ul>
</li>
</ul>
</li>
<li>Widgets
<ul>
<li>Table of Contents Panel (Side panel, bottom sheet, or whole/half page)</li>
<li>Contents View (Vertical scrolling or paged)
<ul>
<li>Loading view while reading from <code>.xhtml</code> file</li>
<li>How HTML+CSS is rendered is TBD</li>
<li>Text selection
<ul>
<li>Add buttons to popup</li>
<li>Custom text selection popup builder</li>
</ul>
</li>
<li>Text highlighting (maybe use CFIs?)</li>
<li>Option to override font, font size, line spacing</li>
<li>Go to CFI location (scroll or page)</li>
<li>Go to CFI History</li>
<li>Optional page between chapters</li>
<li>Page turn transitions</li>
<li>Bookmark support (through CFIs)</li>
<li>Searchable</li>
</ul>
</li>
<li>Epub Title</li>
<li>Pictures ListView</li>
<li>Search Panel/Page
<ul>
<li>Search current chapter or all chapters</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="testing">Testing</h2>
<p>Run tests with the following command</p>
<blockquote>
<p><code>dart test</code></p>
</blockquote>
<h3 id="test-coverage">Test Coverage</h3>
<p>Generate test coverage by running the following commands</p>
<ol>
<li><code>dart pub global activate coverage</code></li>
<li><code>dart test --coverage="coverage"</code></li>
<li><code>dart pub global run coverage:format_coverage --lcov --in=coverage --out=coverage.lcov --packages=.packages --report-on=lib</code></li>
</ol>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="http://idpf.org/epub/dir/">EPUB Specifications</a></li>
<li><a href="http://idpf.org/epub/a11y/accessibility.html">EPUB Accessibility 1.0</a></li>
<li><a href="https://www.w3.org/2021/a11y-discov-vocab/latest/">Schema.org Accessibility Properties for Discoverability Vocabulary</a></li>
</ul>
</section>


      <section class="summary">
          <h2>Libraries</h2>
        <dl>
          <dt id="shu_epub">
  <span class="name"><a href="shu_epub/shu_epub-library.html">shu_epub</a></span> 

</dt>
<dd>A Dart library for reading EPUB files. 
</dd>

        </dl>
      </section>

  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
  <li class="self-crumb">shu_epub package</li>
</ol>


    <h5 class="hidden-xs"><span class="package-name">shu_epub</span> <span class="package-kind">package</span></h5>
    <ol>
      <li class="section-title">Libraries</li>
      <li><a href="shu_epub/shu_epub-library.html">shu_epub</a></li>
</ol>

  </div>

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div>

</main>

<footer>
  <span class="no-break">
    shu_epub
      0.0.1
  </span>

  
</footer>



<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/script.js?v1"></script>



</body>

</html>

